(()=>{"use strict";const t=(t,...e)=>t.addEventListener(...e);function e(e,n,...o){let r,i,s;return o.length&&isNaN(o[0])?(r="object"==typeof o[0]?Object.assign({},o[0]):{capture:!!o[0]},o.splice(0,1)):r={capture:!1},r.once=!0,i=o[0]||0,s=o[1]||new Error("timeout"),new Promise(((o,a)=>{const p=t=>{r.preventDefault&&t.preventDefault(),r.stopPropagation&&t.stopPropagation(),r.stopImmediatePropagation&&t.stopImmediatePropagation(),o()};t(e,n,p,r),i>0&&setTimeout((()=>{((t,...e)=>{t.removeEventListener(...e)})(e,p,r),a(s)}),i)}))}const n={listen:t,waitForEvent:e,extendEventTargetPrototype:()=>Object.assign(EventTarget.prototype,{listen:EventTarget.prototype.addEventListener,unlisten:EventTarget.prototype.removeEventListener,waitFor:function(...t){return e(this,...t)}})};"object"==typeof window&&window===globalThis&&Object.assign(window,n)})();